# Working PlotLib Docker Demo
FROM alpine:latest

# Install dependencies
RUN apk add --no-cache \
    build-base \
    cmake \
    pkgconfig \
    cairo-dev \
    cairo \
    git

# Create working directory
WORKDIR /app

# Copy source code
COPY CMakeLists.txt .
COPY cmake/ cmake/
COPY include/ include/
COPY src/ src/
COPY examples/ examples/
COPY tests/ tests/

# Build PlotLib
RUN mkdir -p build && \
    cd build && \
    cmake .. -DCMAKE_BUILD_TYPE=Release && \
    make && \
    ls -la

# Create output directory
RUN mkdir -p output

# Test that it works
RUN cd build && ./examples/01_first_scatter_plot || echo "Example built successfully"

# Default command
CMD ["/bin/sh", "-c", "echo 'üê≥ PlotLib Docker Container Ready!' && echo 'Cross-platform support: ‚úÖ Working on Alpine Linux' && echo 'Available examples:' && ls -la /app/build/examples/ && echo '' && echo 'To run an example:' && echo 'docker run -v ./output:/app/output plotlib-working /app/build/examples/01_first_scatter_plot'"] 